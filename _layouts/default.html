<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} Â· {{ site.title }}</title>
    <link rel="stylesheet" href="{{ "/assets/css/custom.css" | relative_url }}">
  </head>

  <body>
    <div class="layout">
      {% include sidebar.html %}

      <main class="content">
        {{ content }}
      </main>
    </div>
    <script>
      (function () {
        const root = document.documentElement;
        const stored = localStorage.getItem("theme");
    
        if (stored === "light" || stored === "dark") {
          root.setAttribute("data-theme", stored);
        } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          root.setAttribute("data-theme", "dark");
        } else {
          root.setAttribute("data-theme", "light");
        }
    
        const toggle = document.getElementById("theme-toggle");
        if (toggle) {
          toggle.addEventListener("click", function (e) {
            e.preventDefault();
            const current = root.getAttribute("data-theme");
            const next = current === "dark" ? "light" : "dark";
            root.setAttribute("data-theme", next);
            localStorage.setItem("theme", next);
          });
        }
      })();
    </script>
  </body>
</html>

